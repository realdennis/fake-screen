{"version":3,"sources":["src/wannacry/CountDowner.js","src/wannacry/index.js"],"names":["CountDowner","till","setSeconds","getSeconds","callbacks","stop","second","toFixStr","bind","interval","origin","Date","start","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","map","s","join","percentage","timeDiff","getTime","diffDays","Math","floor","diffHours","diffMinutes","e","setInterval","forEach","cb","clearInterval","str","Error","push","render","wannacry","setTimeout","pay","document","querySelector","payOn","payProgress","payment","lost","lostOn","lostProgress","check","decrypt","copy","now","payDate","lostDate","payCountDowner","innerHTML","formatLast","formatTill","on","style","height","progress","lostCountDowner","onclick","alert","addEventListener","setClipboardData","execCommand","event","preventDefault","clipboardData","setData","removeEventListener"],"mappings":"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","file":"wannacry.1eda19b1.map","sourceRoot":"..","sourcesContent":["class CountDowner {\n  constructor(till) {\n    till.setSeconds(till.getSeconds() + 1);\n    this.till = till;\n    this.callbacks = {\n      stop: [],\n      second: [],\n    };\n    this.toFixStr = this.toFixStr.bind(this);\n    this.interval = null;\n    this.origin = new Date();\n    this.start();\n  }\n  formatTill() {\n    const year = this.till.getFullYear();\n    const month = this.till.getMonth() + 1;\n    const date = this.till.getDate();\n    const hour = this.till.getHours();\n    const minute = this.till.getMinutes();\n    const second = this.till.getSeconds();\n    return (\n      [month, date, year].map(s => this.toFixStr(s)).join('/') +\n      ' ' +\n      [hour, minute, second].map(s => this.toFixStr(s)).join(':')\n    );\n  }\n  toFixStr(s) {\n    return (s < 10 ? '0' : '') + s;\n  }\n  progress() {\n    const percentage = this.timeDiff / (this.till.getTime() - this.origin);\n    return percentage < 0 ? 0 : percentage;\n  }\n  formatLast() {\n    const diffDays = Math.floor(this.timeDiff / (1000 * 3600 * 24));\n    const diffHours = Math.floor(this.timeDiff / (1000 * 3600));\n    const diffMinutes = Math.floor(this.timeDiff / (1000 * 60));\n    const diffSeconds = Math.floor(this.timeDiff / 1000);\n    return [\n      diffDays,\n      diffHours - diffDays * 24,\n      diffMinutes - diffHours * 60,\n      diffSeconds - diffMinutes * 60,\n    ]\n      .map(e => this.toFixStr(e))\n      .join(':');\n  }\n  start() {\n    this.timeDiff = this.till.getTime() - new Date().getTime();\n    this.interval = setInterval(() => {\n      this.timeDiff = this.till.getTime() - new Date().getTime();\n      if (this.timeDiff < 0) {\n        this.stop();\n      } else {\n        this.callbacks.second.forEach(cb => cb());\n      }\n    }, 1000);\n  }\n  stop() {\n    clearInterval(this.interval);\n    this.callbacks.stop.forEach(cb => cb());\n  }\n  on(str, cb) {\n    if (str in this.callbacks) {\n      this.callbacks[str].push(cb);\n    } else {\n      throw Error(`no ${str} type callback`);\n    }\n  }\n}\n\nexport default CountDowner;\n","import 'babel-polyfill';\nimport CountDowner from './CountDowner.js';\nimport './wannacry.scss';\nimport wannacry from './wannacry.pug';\n\nexport const render = () => {\n  setTimeout(start);\n  return wannacry;\n};\n\nfunction start() {\n  const pay = document.querySelector('#pay');\n  const payOn = document.querySelector('#pay-on');\n  const payProgress = document.querySelector('#pay-progress');\n  const payment = document.querySelector('#payment');\n  const lost = document.querySelector('#lost');\n  const lostOn = document.querySelector('#lost-on');\n  const lostProgress = document.querySelector('#lost-progress');\n  const check = document.querySelector('#check');\n  const decrypt = document.querySelector('#decrypt');\n  const copy = document.querySelector('#copy');\n\n  const now = new Date();\n  const payDate = new Date(\n    now.getFullYear(),\n    now.getMonth(),\n    now.getDate(),\n    now.getHours(),\n    now.getMinutes() + 10,\n    now.getSeconds(),\n  );\n  const lostDate = new Date(\n    now.getFullYear(),\n    now.getMonth(),\n    now.getDate(),\n    now.getHours() + 1,\n    now.getMinutes(),\n    now.getSeconds(),\n  );\n  const payCountDowner = new CountDowner(payDate);\n  pay.innerHTML = payCountDowner.formatLast();\n  payOn.innerHTML = payCountDowner.formatTill();\n  payCountDowner.on('second', () => {\n    payProgress.style.height = `${(1 - payCountDowner.progress()) * 100}%`;\n    pay.innerHTML = payCountDowner.formatLast();\n  });\n  payCountDowner.on('stop', () => {\n    payProgress.style.height = `${(1 - payCountDowner.progress()) * 100}%`;\n    payment.innerHTML = '$600';\n  });\n  const lostCountDowner = new CountDowner(lostDate);\n  lost.innerHTML = lostCountDowner.formatLast();\n  lostOn.innerHTML = lostCountDowner.formatTill();\n  lostCountDowner.on('second', () => {\n    lostProgress.style.height = `${(1 - lostCountDowner.progress()) * 100}%`;\n    lost.innerHTML = lostCountDowner.formatLast();\n  });\n  lostCountDowner.on('stop', () => {\n    lostProgress.style.height = `${(1 - lostCountDowner.progress()) * 100}%`;\n  });\n\n  check.onclick = () => {\n    alert(\n      `You didn't pay!\\nYour files will be lost on ${lostCountDowner.formatTill()}!`,\n    );\n  };\n  decrypt.onclick = () => {\n    alert(`Decrypt failed!\\nPlease click <Contact Us>!`);\n  };\n  copy.onclick = function(e) {\n    document.addEventListener('copy', setClipboardData);\n    document.execCommand('copy');\n    alert('Content copied Successfully!');\n  };\n}\n\nfunction setClipboardData(event) {\n  event.preventDefault();\n  if (event.clipboardData) {\n    event.clipboardData.setData(\n      'text/plain',\n      'Money! Give me Money! ლ(́◉◞౪◟◉‵ლ)',\n    );\n  }\n  document.removeEventListener('copy', setClipboardData);\n}\n"]}